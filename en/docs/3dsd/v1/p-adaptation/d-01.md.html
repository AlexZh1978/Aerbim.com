<h1>The &quot;Family Adaptation&quot; command</h1>
<p><strong>Purpose:</strong> adaptation of existing families to work with the 3D Security Designer plugin and the template «AER_ШаблонПроекта_СПС-СОУЭ_R2019_v01.rte», a direct link to download the template and a guide for working with them.</p>
<p align='center'>
<img alt='D 01 01' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-01.png' />
<br/>
Fig. 1. Launching the "Family Adaptation" command
</p>
<p style="text-indent: 15px; line-height: 1 em;"> To run the command, click the "Family Adaptation" button on the "Adaptation" panel of the "3D Security Designer" tab. After that, the "Family Adaptation" window will appear. </p>
<p align='center'>
<img alt='D 01 02' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-02.png' />
<br/>
Fig. 2. The "Family Adaptation" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The window controls are responsible for the following functionality: </p>
<ol>
<li>If the &quot;Adapt to 3D Security Designer Plugin&quot; checkbox is selected, then the selected families are adapted to the 3D Security Designer plugin.</li>
<li>If the &quot;Adapt Embedded Families&quot; checkbox is selected, then the embedded families are adapted to the 3D Security Designer plugin.</li>
<li>If the &quot;Adapt to Template&quot; checkbox is checked, then the selected families are adapted to the template &quot;AER_ШаблонПроекта_СПС-СОУЭ_R2019_v01.rte&quot; (together with embedded families).</li>
<li>The &quot;Templates&quot; list provides information about the template. It allows to download a template and a guide for working with it.</li>
<li>The &quot;From&quot; button allows you to select a folder with families to be adapted.</li>
<li>The &quot;To&quot; button allows you to select a folder in which the adapted families will be saved.</li>
<li>The &quot;Adapt&quot; button starts the process of adapting the selected families.</li>
<li>The &quot;Cancel&quot; button cancels the &quot;Family Adaptation&quot; command and closes the &quot;Family Adaptation&quot; window.</li>
</ol>
<p style="text-indent: 15px; line-height: 1 em;"> After setting up the logic of the "Family Adaptation" command in the "Family Adaptation" window and clicking the "Adapt" button, the adaptation process starts. Adaptation is possible only for families of certain categories. </p>
<p style="text-indent: 15px; line-height: 1 em;"> The example of the operation of the command </p>
<p align='center'>
<img alt='D 01 03' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-03.png' />
<br/>
Fig. 3. Setting command parameters
</p>
<p style="text-indent: 15px; line-height: 1 em;"> First set the settings for adapting families. For a more complete demonstration of the adaptation process, we will place the files of families of various categories and versions of Revit (2016, 2019, 2020) in the "AdaptFrom" folder: </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «AER_УГО_2D_Узел_ИзвещательДымовой.rfa» – family from the category "type annotations", </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «AER_Извещатель_Дымовой_ESSER_IQ8Quad.rfa» – family from the category "fire alarm", </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «AER_Извещатель_Дымовой_ESSER_IQ8Quad_2016.rfa» – family from the category "fire alarm", </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «AER_Извещатель_Дымовой_ESSER_IQ8Quad_2020.rfa» – family from the category "fire alarm", </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «088-19-СПС.СОП.rte» – the template file, </p>
<p style="text-indent: 15px; line-height: 0.8em;"> «088-19-СПС.СОП_АУМ.rvt» – the project file,
and click the "Adapt" button. </p>
<p align='center'>
<img alt='D 01 04' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-04.png' />
<br/>
Fig. 4. Contents of the "AdaptFrom" folder before starting the adaptation process
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The «AER_Извещатель_Дымовой_ESSER_IQ8Quad_2016.rfa» family, which has an earlier version of Autodesk Revit (2016), will be automatically updated to the current version of Autodesk Revit (2019) and a corresponding message will be issued </p>
<p align='center'>
<img alt='D 01 05' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-05.png' />
<br/>
Fig. 5. Request to update the Revit format
</p>
<p style="text-indent: 15px; line-height: 1 em;"> In the process of adapting parent and/or embedded families, various warnings from Autodesk Revit may appear. </p>
<p align='center'>
<img alt='D 01 06' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-06.png' />
<br/>
Fig. 6. Warnings during adaptation
</p>
<p style="text-indent: 15px; line-height: 1 em;"> During the adaptation warnings can be accepted (click "OK") and the adaptation will continue or you can cancel the adaptation of this family (click "Cancel"). If the warning concerned embedded families and the "Cancel" button was pressed, the adaptation of embedded families will not be performed, and the adaptation of the parent family will continue. In case of cancellation, a corresponding message will be issued and the adaptation process for the remaining families will continue. </p>
<p align='center'>
<img alt='D 01 07' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-07.png' />
<br/>
Fig. 7. Adapt Embedded Families
</p>
<p style="text-indent: 15px; line-height: 1 em;"> If a family for a later version of Autodesk Revit is identified during the adaptation process, a corresponding message will be issued and the adaptation process for the remaining families will continue. </p>
<p align='center'>
<img alt='D 01 08' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-08.png' />
<br/>
Fig. 8. Processing of families in the later Revit format
</p>
<p style="text-indent: 15px; line-height: 1 em;"> If during the adaptation process a family is identified whose category does not correspond to any of the categories supported by the 3D Security Designer plugin, a corresponding message will be issued and the adaptation process for the remaining families will continue. </p>
<p align='center'>
<img alt='D 01 09' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-09.png' />
<br/>
Fig. 9. Absence of a supported category
</p>
<p style="text-indent: 15px; line-height: 1 em;"> After the adaptation process is completed, a corresponding message will be issued. </p>
<p align='center'>
<img alt='D 01 10' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-10.png' />
<br/>
Fig. 10. Message about the completion of adaptation
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The number of successfully adapted families is calculated by the number of successfully adapted parent families. </p>
<p style="text-indent: 15px; line-height: 1 em;"> As a result of executing the "Family Adaptation" command for the example shown, only two families will be successfully adapted and saved in the target folder ("AdaptTo" in our example): «AER_Извещатель_Дымовой_ESSER_IQ8Quad.rfa» and «AER_Извещатель_Дымовой_ESSER_IQ8Quad_2016.rfa». At the same time, in the file "AER_Извещатель_Дымовой_ESSER_IQ8Quad_2016.rfa" embedded families were not adapted because the "Cancel" button was pressed in the warning message window, which led to the cancellation of the adaptation of embedded families. Files that are not Revit families are ignored and do not participate in the process. </p>
<p style="text-indent: 15px; line-height: 1 em;"> The following ambiguities are possible when working with the "Family Adaptation" command: </p>
<ol>
<li>If before the start of the adaptation process in the target folder (the folder in which the adapted families will be saved) there were previously files with names that match the names of the adapted families, they will be replaced with adapted files.</li>
<li>If they match when selecting the source and target folders, the corresponding message will be displayed. This mode of operation is possible. In this case, a subfolder &quot;Adapted&quot; will be created in the folder, in which the adapted families will be placed.</li>
</ol>
<p align='center'>
<img alt='D 01 11' src='/upload/en/docs/3dsd/v1/p-adaptation/d-01-img/d-01-11.png' />
<br/>
Fig. 11. Message about the match of the source and target folders
</p>
<p style="text-indent: 15px; line-height: 1 em;"> If the command fails, a corresponding message will be displayed, and the families will not be adapted. </p>
