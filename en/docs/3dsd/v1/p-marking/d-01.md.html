<h1>The &quot;Create Circuit&quot; command</h1>
<p><strong>Purpose:</strong> selection of a circuit, i.e. a subset of elements (Revit families) as part of a project with a user-specified sequence order. The order of the families is used for marking in accordance with the mark format specified by the user.</p>
<p align='center'>
<img alt='Рис. 1. Запуск команды «Новая цепь»' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-01.png' />
<br/>
Fig. 1. Launching the "Create Circuit" command
</p>
 <p style="text-indent: 15px; line-height: 1 em;"> The command is intended for creating circuit and marking its elements. The command works only at a low level of detailing (the marked Revit families are presented in the form of conditional graphic designations).
To run the command, click the "Create Circuit" button in the "Actions with Circuits" group on the "Marking" panel of the "3D Security Designer" tab. After that, the window "Create Circuit and Mark its Elements" will be displayed.</p>
<p align='center'>
<img alt='Рис. 2. Окно «Нанесение маркировки в новой цепи»' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-02.png' />
<br/>
Fig. 2. Window "Create Circuit and Mark its Elements"
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The window control elements are responsible for the following functionality: </p>
<ol>
<li><p>The &quot;Choose Format&quot; drop-down list allows you to select one of the formats previously created in the document. The items in the list contain the name and format structure combined with a colon. For more information about the format structure, see the &quot;Format Creation&quot; command.</p>
</li>
<li><p>The &quot;Create Format&quot; button allows you to call the &quot;Create Format&quot; command to create a new format in the document. The created format appears in the &quot;Format Selection&quot; drop-down list.</p>
</li>
<li><p>A list containing &quot;Parameter&quot; - &quot;Value&quot; pairs set by the user. These parameters include:
&quot;Circuit Name&quot;, the value of this parameter is entered by the user and must be unique within the document.
Other user parameters provided by the selected marking format. The values of these fields are not subject to uniqueness requirements.
The values for the above parameters must be set without fail.</p>
</li>
<li><p>If the &quot;Mark Embedded Elements&quot; checkbox is selected, then the embedded families are marked. At the same time, embedded families should be &quot;General&quot; with respect to the parent family, have a specific category and be adapted to work with the 3D Security Designer add-in. The labeling of embedded families is not visualized.</p>
</li>
<li><p>If the &quot;Visualize Marks&quot; checkbox is selected, then the mark is visualized in accordance with the visualization settings.</p>
</li>
<li><p>If the &quot;Delete Alternative Marks&quot; checkbox is selected, then when marking an element (family) the value of the parameter (if it was previously set) of the alternative mark will be deleted.</p>
</li>
<li><p>If the &quot;Count Addresses in Elements&quot; checkbox is selected, then during the marking the value of the parameter containing the number of addresses (if the device is an address device) will be taken into account when forming the counter.</p>
</li>
<li><p>The &quot;Customize Mark Visualization&quot; button allows you to open a window for configuring visualization.</p>
</li>
<li><p>The &quot;Create and Mark&quot; button starts the marking for a new circuit. The button is active only if the values for all parameters listed in paragraph 3 are filled in.</p>
</li>
<li><p>The &quot;Cancel&quot; button cancels the &quot;Create Circuit&quot; command and closes the &quot;Create Circuit and Mark its Elements&quot; window.</p>
</li>
</ol>
<p style="text-indent: 15px; line-height: 1 em;"> After setting up the logic of the "Create Circuit" command in the "Create Circuit and Mark its Elements" window and clicking the "Create and Mark" button, the process of selecting a sequence of elements (families) for marking starts. The determination of the order and the selection of the sequence of elements is carried out by means of a line of detailing passing through the conditional graphic designations (as a rule) of elements (families). The  line of detailing does not have to be continuous. The order of marking elements is set by the order in which the elements intersect with the detail line. </p>
<p style="text-indent: 15px; line-height: 1 em;"> The completion of the process of determining the order and selecting the required elements is confirmed by double pressing the ESC key. After that, the selected elements are marked in accordance with the previously made settings. If an alternative mark has been set for any elements in the circuit, then it will take precedence during visualization. </p>
<p style="text-indent: 15px; line-height: 1 em;"> The operation of the "Create Circuit" command: </p>
<p align='center'>
<img alt='Рис.3. До выполнения команды «Новая цепь»' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-03.png' />
<br/>
Fig.3. Before executing the "Create Circuit" command
</p>
<p align='center'>
<img alt='Рис. 4. Определение очередности и выбор последовательности элементов при помощи линии детализации ' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-04.png' />
<br/>
Fig. 4. Prioritization and selection of the sequence of elements using the line of detailing
</p>
<p align='center'>
<img alt='Рис. 5. Результат выполнения команды «Новая цепь» с учетом ранее сделанных настроек в окне «Нанесение маркировки в новой цепи» ' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-05.png' />
<br/>
Fig. 5. The result of executing the "Create Circuit" command, taking into account the previously made settings in the "Create Circuit and Mark its Elements" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The following ambiguities are possible when working with the "Create Circuit" command: </p>
<ol>
<li>If, in the process of creating a circuit, the selected elements contain elements that were previously included in other circuits, then the corresponding information window will be displayed, determining the user's further actions. In this case, the window will display information about the number of elements and the names of the circuits for which there was an ambiguity. If the command continues to work, the numbering of the elements and the visual representation of the marking in the affected circuits will automatically change (if visualization for them was provided earlier) in accordance with the last settings made in the &quot;Customize Mark Visualization&quot; window.</li>
</ol>
<p align='center'>
<img alt='Рис. 6. Устранение коллизии' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-06.png' />
<br/>
Fig. 6. Elimination of the collision
</p>
<ol start="2">
<li>If in the process of creating a circuit the number of selected elements exceeds the number provided by the mark format, the corresponding information window will be displayed, determining the user's further actions. At the same time, information about the number of actually selected elements and the maximum number of elements determined by the marking format will appear in the window.</li>
</ol>
<p align='center'>
<img alt='Рис. 7. Устранение коллизии ' src='/upload/en/docs/3dsd/v1/p-marking/d-01-img/d-01-07.png' />
<br/>
Fig. 7. Elimination of the collision
</p>
<p style="text-indent: 15px; line-height: 1 em;"> If the command fails, a corresponding message will be displayed, and the creation of a marked circuit will not occur. </p>
