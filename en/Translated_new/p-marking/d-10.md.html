<h1>The &quot;Create Mark Format&quot; command</h1>
<p><strong>Purpose:</strong> create a tag-based mark format. When marking elements, these tags will be replaced with specific string values.</p>
<p align='center'>
<img alt='D 10 01' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-01.png' />
<br/>
Fig. 1. Launching the "Create Mark Format" command
</p>
<p style="text-indent: 15px; line-height: 1 em;"> To run the command, click the "Create Mark Format" button, which is located in the hidden part on the "Marking" panel of the "3D Security Designer" tab. After that, the "Create Mark Format" window will be displayed. </p>
<p align='center'>
<img alt='D 10 02' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-02.png' />
<br/>
Fig. 2. The "Create Mark Format" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> To create mark format, the following tags are provided, which can be combined in an arbitrary sequence: </p>
<ul>
<li>[Circuit Name] allows you to display the name assigned to each circuit by 3D Security Designer.</li>
<li>[Counter] allows you to number the circuit elements. The numbering mechanism can take into account such nuances as the embedding of Revit families and the reservation of multiple numbers for families with multiple logical addresses in the circuit.</li>
<li>[User Input] allows you to display arbitrary user information as part of mark. The user input is filled in at the stage of creating/changing circuits.</li>
<li>[Revit Parameter] allows you to display information in mark from Revit parameters defined for the marked instance of the family.</li>
<li>[Separator] is used to visually separate the parts of mark. Replaced with the selected character: dot, dash, slash, etc.</li>
<li>[Text] allows you to display arbitrary text of several characters. No filling is required at the stage of creating/editing the circuit.</li>
</ul>
<p style="text-indent: 15px; line-height: 1 em;"> For example, the mark format of three tags [Circuit Name][Separator][Counter] can generate the «Л-007» mark for the element. </p>
<p style="text-indent: 15px; line-height: 1 em;"> The control elements of the "Creating Mark format" window are responsible for the following functionality: </p>
<ol>
<li>The &quot;Format Name&quot; text field allows you to specify the format name. The format name must be unique within the current document. If a non-unique format name is specified, an error message will be displayed, the text field will be highlighted in red, and the &quot;Create Format&quot; button will become inactive.</li>
</ol>
<p align='center'>
<img alt='D 10 03 A' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-03-a.png' />
<img alt='D 10 03 B' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-03-b.png' />
<br/>
Fig. 3. Error with non-unique format name
</p>
<ol start="2">
<li>The &quot;Format Structure&quot; list contains a sequence of tags that actually define the format structure. Tags are responsible both for displaying meaningful information in element marking (for example, the name of the circuit), and for separator characters entered for convenient visual perception of mark. The list can contain no more than nine tags with separators and no more than five tags without separators. If these conditions are violated, the reminder text about the format structure will be highlighted in red.</li>
</ol>
<p align='center'>
<img alt='D 10 04' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-04.png' />
<br/>
 Fig. 4. Reminder of the format structure
</p>
 3. To speed up the process, a new format can be created based on the structure of the previously created format. To do this, the "Based on Existing Format" checkbox is provided. If the checkbox is selected, the "Format Structure" list will display the tags included in the structure of the previously created format that was selected in the drop-down list. In Fig. 2 above, a new format named "Test_Format" is created based on a format named "Alex" containing the tags [Circuit Name], [Counter].
 4. The drop-down list "Based on the existing format" allows you to select the existing mark format in the document to create a new format based on it. Each element in the drop-down list contains, separated by a colon, the name and structure of the existing format.
 5. The "Add Tag [Circuit Name]" button adds the tag [Circuit Name] to the created mark format. This tag has no parameters. The circuit name itself is entered at the stage of creating/changing the circuit.
 6. The "Add Tag [Counter]" button opens the "Add Tag [Counter]" window to set parameters and insert the tag into the format being created. Only one counter can be present in the mark format.
<p align='center'>
<img alt='D 10 05' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-05.png' />
<br/>
Fig. 5. The "Add Tag [Counter]" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The "Add Tag [Counter]" window has following control elements: </p>
<ul>
<li>The &quot;Min&quot; field is the initial value of the counter corresponding to the first element in the circuit.</li>
<li>The &quot;Max&quot; field is the maximum value of the counter provided by the mark format. If it is exceeded, the user receives an alert.</li>
<li>The &quot;Increment Step&quot; field is the increment of the counter when moving to the next marked element in the circuit. In the current version, it is always equal to one.</li>
<li>The &quot;Number of Digits&quot; field is the number of digits in the string representation of the counter. If necessary, the characters &quot;0&quot; are added to the string representation of the counter in front. For example, the number 3 in this field gives the string representation &quot;007&quot; for the counter value 7.</li>
<li>The &quot;Add Tag&quot; button adds the tag [Counter] to the format structure. Tag parameters are displayed in square brackets in the specified order. For example, in the tag [Counter 1 3 1 3], the parameter &quot;Min&quot; is 1, &quot;Max&quot; is 3, &quot;Increment Step&quot; is 1, &quot;Number of Digits&quot; is 3.</li>
<li>The &quot;Cancel&quot; button cancels the addition of the tag [Counter].</li>
</ul>
<ol start="7">
<li>The &quot;Add Tag [User Input]&quot; button opens the &quot;Add Tag [User Input]&quot; window for setting parameters and inserting a tag into the format being created. The mark format can contain several user fields with different names. Values for user fields are entered at the stage of creating/changing circuits.</li>
</ol>
<p align='center'>
<img alt='D 10 06' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-06.png' />
<br/>
Fig. 6. The "Add Tag [User Input]" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The "Add Tag [User Input]" window has following control elements: </p>
<ul>
<li>&quot;User Input Name&quot; allows you to specify a name for the user field. This name will appear in the input request. Further, when creating or changing a marked circuit and selecting this format to be created, a value will be assigned to this name.</li>
<li>The &quot;Add Tag&quot; button adds the [User Input] tag to the format structure. The parameter &quot;User Input name&quot; is displayed in square brackets. For example, [User Input ‘BCO’] describes the field ‘BCO'. For an example of assigning a value to the user field ‘BCO’ already at the stage of creating a new circuit, see Figure 10 below.</li>
<li>The &quot;Cancel&quot; button cancels the tag addition [User Input].</li>
</ul>
<ol start="8">
<li>The &quot;Add Tag [Revit Parameter]&quot; button opens the &quot;Add Tag [Revit Parameter]&quot; window to set parameters and insert the tag into the format being created.</li>
</ol>
<p align='center'>
<img alt='D 10 07' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-07.png' />
<br/>
Fig. 7. The "Add Tag [Revit Parameter]" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The "Add Tag [Revit Parameter]" window has following control elements: </p>
<ul>
<li>The text field &quot;Revit Parameter Name&quot; allows you to specify the name of the Revit Parameter, the value of which will be displayed in mark. If there are several parameters with the same name in an element (family), then the instance parameter will have display priority. If there is no parameter with the specified name in the element (family), the symbol &quot;?&quot; will be displayed instead of the value.</li>
<li>The &quot;Add Tag&quot; button adds the tag [Revit Parameter] to the &quot;Format Structure&quot; list in the &quot;Create Mark Format&quot; window. For example, [Revit Parameter ‘Brand’].</li>
<li>The &quot;Cancel&quot; button cancels the addition of the [Revit Parameter] tag to the structure of the format being created.</li>
</ul>
<ol start="9">
<li>The &quot;Add Tag [Separator]&quot; button displays the &quot;Tag Parameters [Separator]&quot; window and allows you to select a specific separator.</li>
</ol>
<p align='center'>
<img alt='D 10 08' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-08.png' />
<br/>
Fig. 8. The "Tag Parameters [Separator]" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The "Add Tag [Separator]" window has following control elements: </p>
* The "Choose Separator" drop-down list allows you to select one of the predefined separators: slash, hyphen, colon, etc.
* The "Add Tag" button adds the [Separator] tag to the "Format Structure" list in the parent window "Create Mark Format". For example, in the form of [Separator ‘/’].
* The "Cancel" button cancels the addition of the [Separator] tag to the structure of the format being created.
<ol start="10">
<li>The &quot;Add Tag [Text]&quot; button opens the &quot;Add Tag [Text]&quot; window and allows you to enter text for the tag [Text] and add the tag to the format structure.</li>
</ol>
<p align='center'>
<img alt='D 10 09' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-09.png' />
<br/>
Fig. 9. The "Add Tag [Text]" window
</p>
<p style="text-indent: 15px; line-height: 1 em;"> The "Add Tag [Text]" window has following control elements: </p>
<ul>
<li>The &quot;Text&quot; field allows you to specify the text (no more than 10 characters) that will be reflected in the mark.</li>
<li>The &quot;Add Tag&quot; button adds the tag [Text] to the &quot;Format Structure&quot; list in the parent window &quot;Create Mark Format&quot;. For example, in the form of [Text ‘ABC'].</li>
<li>The &quot;Cancel&quot; button cancels the addition of the [Text] tag to the structure of the format being created.</li>
</ul>
<ol start="11">
<li>A group of buttons that allows you to edit and delete tags by the location of tags in the structure of the format being created.</li>
</ol>
<ul>
<li><img alt='D 10 Btn A' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-btn-a.png' />allows to edit the parameters of the selected tag, except for the tag [Circuit Name], which has no parameters.</li>
<li><img alt='D 10 Btn B' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-btn-b.png' />allows to delete the selected tag from the format structure.</li>
<li><img alt='D 10 Btn C' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-btn-c.png' />allows to move the selected tag up (one click of the button moves the tag up one position).</li>
<li><img alt='D 10 Btn D' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-btn-d.png' />allows to move the selected tag down (one click of the button moves the tag one position down).</li>
</ul>
<ol start="12">
<li>The &quot;Format Sample&quot; field reflects the current view of the edited mark format. The name and structure of the format are separated by a colon in the field. If the name has not been set yet, it is replaced in the view with the symbol &quot;?&quot;. The tags that actually define the format structure are displayed as follows:</li>
</ol>
<ul>
<li>The [Circuit Name] tag is displayed as the string &quot;[Circuit Name]&quot;.</li>
<li>The tag [Counter] is displayed as a number corresponding to the minimum value of the counter, for example &quot;001&quot;.</li>
<li>The tag [User Field 'Field_name'] is displayed as &quot;[U:Field_name]&quot;.</li>
<li>The tag [Revit Parameter 'Parameter Name'] is displayed as &quot;[R:Parameter name]&quot;.</li>
<li>[Separator] is replaced by the corresponding separator character.</li>
<li>[Text] is replaced with the corresponding text.</li>
</ul>
<ol start="13">
<li>The &quot;Create Format&quot; button creates a new format with the specified name and structure in the current document and closes the &quot;Create Mark Format&quot; window.</li>
<li>The &quot;Cancel&quot; button cancels the &quot;Create Mark Format&quot; command and closes the &quot;Create Mark Format&quot; window.</li>
</ol>
<p style="text-indent: 15px; line-height: 1 em;"> After specifying the format name, format structure in the "Create Mark Format" window and clicking the "Create Format" button, a new mark format is created in the current document. Subsequently, it can be seen and selected in the drop-down list of mark formats "Choose Format" when creating or editing marked circuits (in our example, a format named as "Test_Format"). </p>
<p align='center'>
<img alt='D 10 10' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-10.png' />
<br/>
Fig. 10. Example of using the mark format. Assigning a value to the user's field ‘BCO’ at the stage of creating a new circuit
</p>
<p style="text-indent: 15px; line-height: 1 em;"> If the command fails, a corresponding message will be displayed, and the mark format will not be created. </p>
<p align='center'>
<img alt='D 10 11' src='/upload/en/Translated_new/p-marking/d-10-img/d-10-11.png' />
<br/>
Fig. 11. Failure message
</p>
